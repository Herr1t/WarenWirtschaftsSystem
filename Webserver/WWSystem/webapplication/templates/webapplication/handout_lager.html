{% extends "webapplication/layout.html" %}

{% block body %}
  <h1 class="header" style="text-align: center;">Lagerliste</h1>
  <input class="button" value="Zurück" type="button" onclick="window.location.href='{% url 'lagerliste' %}'"></input>

  <h2>Aus Lagerliste austragen</h2>
  <form id="form" action="{% url 'handout_lager' %}" method="POST">
    {% csrf_token %}
    <div class="form-group">
      <fieldset id="list" class="input-field">
        <input autofocus class="form-control" type="text" name="0" required onfocusout="focusoutevent()" placeholder="Inventarnummer/Servicenummer"/>
      </fieldset>
    </div>
    <div class="form-group">
      <button class="btn btn-primary" onclick="addInputField()" type="">Weiterer Eintrag</button>
    </div>
    <div class="form-group">
        <input class="form-control" type="text" name="investmittel" required placeholder="Investmittel: Ja/Nein">
    </div>
    <div class="form-group">
        <input class="form-control" type="text" name="klinik" required placeholder="OU">
    </div>
    <input style="margin-left: 7px; margin-bottom: 8px;" class="btn btn-primary" type="submit", value="Austragen">
  </form>
  {% if alarm %}
    <div class="alert alert-danger" role="alert">Die Investmittel der OU {{ alarm }} sind im Minusbereich: {{ geld }}€ momentan</div>
  {% endif %}
  {% if message %}
    <div class="alert alert-success" role="alert">{{ message }}</div>
  {% endif %}
  {% if alert %}
    <div class="alert alert-warning" role="alert">{{ alert }}</div>
  {% endif %}


  <script>
    const myForm = document.getElementById("list");
    c = 1;

    function addInputField() {
      // create an input field to insert
      const newInputField = document.createElement("input");
      // set input field data type to text
      newInputField.type = "text";
      // set input field name
      newInputField.name = c;
      // set required
      newInputField.setAttribute("required", "");

      newInputField.classList.add("form-control");
      // insert element
      myForm.appendChild(newInputField);
      newInputField.focus()
      c = c + 1;
    }
    
    const focusoutevent = document.getElementById("form")

    focusoutevent.addEventListener("focusout", newInputField)
  </script>
{% endblock %}